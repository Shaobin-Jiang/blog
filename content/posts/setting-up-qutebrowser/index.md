---
title: å‘å…¨é”®ç›˜æ“ä½œæ›´è¿›ä¸€æ­¥â€”â€”å¼€å§‹ä½¿ç”¨ Qutebrowser
description: å°† qutebrowser é…ç½®å¾—æ›´åŠ é¡ºæ‰‹ (mac)
date: 2025-05-06 14:00:00
lastmod: 2025-05-06 14:00:00
image: cover.jpg
categories:
  - Tools
tags:
  - qutebrowser
  - neovim
---

å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œæˆ‘ç»å¸¸ä¼šé—®è‡ªå·±ä¸€ä¸ªé—®é¢˜ï¼šä¸€å‘³è¿½æ±‚å…¨é”®ç›˜æ“ä½œçœŸçš„æœ‰å¿…è¦å—ï¼Ÿ

æˆ‘æ˜¯ä¸€å neovim ç”¨æˆ·ï¼Œç¼–è¾‘å·¥ä½œå·²ç»å®Œå…¨è„±ç¦»äº†é¼ æ ‡ï¼›è€Œåœ¨ä½“éªŒåˆ°äº†ä¸éœ€è¦åå¤æŒªåŠ¨å³æ‰‹å»æ‹¿é¼ æ ‡çš„èˆ’é€‚ä¹‹åï¼Œæˆ‘æ„ˆå‘å¸Œæœ›åœ¨å…¶ä»–ä½¿ç”¨åœºæ™¯ä¸‹ä¹Ÿå¯ä»¥å®Œå…¨ä¾èµ–é”®ç›˜ã€‚äºæ˜¯ï¼Œæˆ‘å¼€å§‹æŠ˜è…¾å¹³é“ºæ¡Œé¢ç®¡ç†å™¨ï¼Œä»åœ¨ linux ä¸Šæ£é¼“ hyprland åˆ°ç°åœ¨åœ¨ mac ä¸Šå®Œå…¨è¿ç§»åˆ° aerospace + sketchybarã€‚æˆ‘ä½¿ç”¨é¼ æ ‡çš„æ—¶é—´ç¡®å®è¶Šæ¥è¶Šå°‘ï¼Œä½†æ˜¯å´å§‹ç»ˆæœ‰ä¸€å¤„ä½¿ç”¨åœºæ™¯ï¼Œæˆ‘æ²¡æœ‰åŠæ³•æ‘†è„±é¼ æ ‡ã€‚

æµè§ˆå™¨ã€‚

å› ä¸ºæˆ‘è‡ªå·±ä¹Ÿä¼šåšä¸€äº›å‰ç«¯å¼€å‘ï¼Œæ‰€ä»¥åœ¨æˆ‘çš„è§‚å¿µä¸­ï¼Œå°†æœ¬å°±æ¯”è¾ƒå¤æ‚çš„ç½‘é¡µä¸Šçš„å¤æ‚äº¤äº’ç®€åŒ–åˆ°å¯ä»¥å®Œå…¨ä¾é é”®ç›˜æè¿°çš„ç¨‹åº¦ç¡®å®æ˜¯æœ‰äº›å›°éš¾ã€‚æˆ‘å€’æ˜¯å¬è¯´è¿‡ä¸€äº›è§£å†³æ–¹æ¡ˆæ¯”å¦‚ vimiumï¼Œä½†å½“æˆ‘çŸ¥é“è¿™äº›å·¥å…·æ˜¯ä»¥æµè§ˆå™¨æ‰©å±•çš„å½¢å¼æä¾›çš„æ—¶å€™ï¼Œéš¾å…æ€€ç–‘è¿™ç§å±‚é¢çš„ hack åˆ°åº•èƒ½ä¸èƒ½çœŸçš„å®ç°ç†æƒ³çš„æ•ˆæœï¼ˆå®é™…ä¸Šï¼Œvimium è¿™ç±»å·¥å…·ç¡®å®æœ‰äº›æ—¶å€™æ— æ³•æ­£ç¡®å°†æŒ‰é”®æ‹¦æˆªä¸‹æ¥ï¼‰ã€‚æ‰€ä»¥ï¼Œå¯¹äºå…¨é”®ç›˜æ“ä½œæµè§ˆå™¨ï¼Œæˆ‘çœŸæ­£æƒ³è¦çš„æ˜¯ä¸€ä¸ªå°†æŒ‰é”®æ‹¦æˆªåšè¿›åº”ç”¨æœ€åº•å±‚ã€å…·æœ‰éå¸¸å¼ºè‡ªå®šä¹‰èƒ½åŠ›çš„æµè§ˆå™¨ã€‚æ‰€ä»¥ï¼Œç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´å†…ï¼Œæˆ‘éƒ½åœ¨çº ç»“ï¼Œå¦‚æœæˆ‘åœ¨å¼€å‘æœŸé—´æŸ¥çœ‹æ–‡æ¡£çš„æ—¶å€™ä¸å¯é¿å…è¦å»ä½¿ç”¨é¼ æ ‡ï¼Œé‚£ä¹ˆæˆ‘è¿™æ ·å»è¿½æ±‚ç¼–è¾‘é˜¶æ®µå…¨é”®ç›˜æ“ä½œçš„æ„ä¹‰æ˜¯ä»€ä¹ˆã€‚

ä½†ç°åœ¨ï¼Œæˆ‘è®¤ä¸ºæˆ‘ç»ˆäºæ˜¯æ‰¾åˆ°äº†è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆï¼šqutebrowserã€‚

## 1 ç®€å•ä»‹ç» qutebrowser

å…³äº qutebrowser çš„ä»‹ç»åœ¨å®ƒçš„å®˜ç½‘ä¸Šæ˜¯è¿™æ ·çš„ï¼š

> qutebrowser is a keyboard-focused browser with a minimal GUI. Itâ€™s based on Python and Qt and free software.

å¯ä»¥çœ‹åˆ°ï¼Œqutebrowser çš„å®šä½å°±æ˜¯ keyboard-focused **browser** è€Œä¸æ˜¯ä¸€ä¸ªæ‰©å±•ã€‚è€Œä¸”ï¼Œå®ƒè¿˜æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ä¼˜åŠ¿ï¼Œå°±æ˜¯æç®€çš„ç•Œé¢â€”â€”æˆ‘ä¸ªäººæ˜¯ä¸å¤ªå–œæ¬¢ä¼ ç»Ÿçš„æµè§ˆå™¨ä¸Šé¢é‚£äº›ä¹±ä¸ƒå…«ç³Ÿçš„æ§ä»¶ï¼Œä¹¦ç­¾æ ä»¥åŠä¸€äº›æŒ‰é’®å§‹ç»ˆå æ®ç©ºé—´æ˜¯æ²¡æœ‰é“ç†çš„ï¼Œå› ä¸ºæˆ‘å¹¶ä¸æ€»æ˜¯éœ€è¦çœ‹åˆ°è¿™äº›ä¿¡æ¯ã€‚è€Œ qutebrowser çœŸçš„å°±æ˜¯æŠŠç•Œé¢åšåˆ°äº†æè‡´çš„æ¸…çˆ½ï¼Œæ•´ä¸ªç•Œé¢ä¸Šé™¤äº†é¡¶éƒ¨çš„æ ‡ç­¾å’Œåº•éƒ¨çš„ç®€å•çŠ¶æ€æ ï¼Œä»€ä¹ˆå¤šä½™çš„éƒ½æ²¡æœ‰ï¼š

![](gui.png)

è¿™ç§é£æ ¼æ˜¯å¦å¥½çœ‹è§ä»è§æ™ºï¼Œåæ­£æˆ‘å¯æ˜¯å¤ªå–œæ¬¢äº†ã€‚

## 2 åŸºæœ¬çš„ä½¿ç”¨

qutebrowser çš„è®¾è®¡å’Œ vim ä¸€è„‰ç›¸æ‰¿ï¼Œé‡‡ç”¨äº†ä¸åŒçš„ modeã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¤„äº normal mode ä¸‹ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ï¼š

- <kbd>h</kbd> /<kbd>j</kbd> /<kbd>k</kbd> /<kbd>l</kbd>ï¼šä¸Šä¸‹å·¦å³æ»šåŠ¨é¡µé¢
- <kbd>o</kbd> / <kbd>O</kbd>ï¼šåœ¨å½“å‰æ ‡ç­¾é¡µ / æ–°çš„æ ‡ç­¾é¡µæ‰“å¼€é“¾æ¥
- <kbd>f</kbd> / <kbd>F</kbd>ï¼šåœ¨å½“å‰æ ‡ç­¾é¡µ / æ–°çš„æ ‡ç­¾é¡µæ‰“å¼€é“¾æ¥ï¼ˆè¿›å…¥ hint modeï¼Œå¦‚ä¸‹å›¾ï¼‰
- ...

![](hint.png)

é»˜è®¤çš„å¿«æ·é”®æœ‰å¾ˆå¤šï¼Œä½†å’Œ vim ä¸€æ ·æˆ‘ä»¬æ²¡æœ‰åŠæ³•æŠŠæ‰€æœ‰çš„åŠŸèƒ½éƒ½ç»‘å®šåˆ°å¿«æ·é”®ä¸Šï¼Œæ‰€ä»¥ qutebrowser è¿˜æ”¯æŒ command modeï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ normal mode ä¸‹è¾“å…¥ <kbd>:</kbd> å°±å¯ä»¥å¼€å§‹è¾“å…¥å‘½ä»¤ï¼Œä¾‹å¦‚ `:help -t` æ˜¯åœ¨æ–°çš„æ ‡ç­¾é¡µæ‰“å¼€å¸®åŠ©æ–‡æ¡£ï¼Œ`:wq` æ˜¯ä¿å­˜å½“å‰å·²ç»æ‰“å¼€çš„æ ‡ç­¾é¡µå¹¶é€€å‡ºã€‚æ­¤æ¨¡å¼æ”¯æŒ emacs style çš„å¿«æ·é”®ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <kbd>Tab</kbd> å»é€‰æ‹©è¡¥å…¨å»ºè®®ã€‚

## 3 é…ç½® qutebrowser

qutebrowser éå¸¸æ£’çš„ä¸€ç‚¹æ˜¯æ”¯æŒæˆ‘ä»¬ä½¿ç”¨ python è¿›è¡Œé…ç½®ã€‚é…ç½®æ–‡ä»¶çš„é»˜è®¤ä½ç½®å¯ä»¥é€šè¿‡ `:version` å‘½ä»¤æŸ¥çœ‹ï¼Œåœ¨ mac ä¸Šè¿™ä¸ªä½ç½®æ˜¯ `~/.qutebrowser`ï¼Œå…¥å£æ–‡ä»¶ä¸º `config.py`ã€‚é»˜è®¤æƒ…å†µä¸‹è¿™ä¸ªæ–‡ä»¶å¤¹çš„ç»“æ„æ˜¯ï¼š

```
ğŸ“‚ .qutebrowser
--  ğŸ“„ config.py
--  ğŸ“„ quickmarks
--  ğŸ“‚ bookmarks
----  ğŸ“„ urls
--  ğŸ“‚ greasemonkey
```

å…¶ä¸­ï¼Œquickmarks å’Œ bookmarks éƒ½æ˜¯ä¹¦ç­¾ï¼ˆåé¢æˆ‘ä»¬ä¼šè¯¦ç»†äº†è§£ï¼‰ï¼Œgreasemonkey åˆ™ç”¨æ¥å­˜æ”¾æ²¹çŒ´è„šæœ¬ã€‚

### 3.1 åŸºæœ¬çš„é…ç½®

åœ¨ `config.py` ä¸­ï¼Œæˆ‘è®¤ä¸ºè‡³å°‘åº”è¯¥åšè¿™äº›åŸºæœ¬é…ç½®ï¼š

```python
config.load_autoconfig(False)

import os

old_path = os.environ["PATH"]
os.environ["PATH"] = f"/opt/homebrew/bin:{old_path}"

c.scrolling.bar = "always"
```

åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªå…¨å±€å˜é‡ï¼š`c` å’Œ `config`ï¼Œåè€…ä¸»è¦æ˜¯æä¾›äº†ä¸€äº›æ–¹æ³•ä¾›æˆ‘ä»¬è°ƒç”¨ï¼Œæˆ‘ä»¬æ›´å¤šè¿˜æ˜¯ä½¿ç”¨ `c` å¯¹è±¡ä¸­çš„ä¸€äº›å­—æ®µè¿›è¡Œé…ç½®ã€‚

åœ¨ä¸Šè¿°çš„é…ç½®ä¸­ï¼Œæˆ‘ä»¬åšäº†ä¸‰ä»¶äº‹æƒ…ï¼š

- ç¦ç”¨äº† qutebrowser çš„ autoconfigï¼›æˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ç•Œé¢ç›´æ¥é€šè¿‡ `:set` ä¿®æ”¹å±æ€§ï¼Œè€Œé»˜è®¤æƒ…å†µä¸‹è¿™ä¸ªä¿®æ”¹ä¼šè¢«è®°å½•ä¸‹æ¥ï¼Œä¸‹æ¬¡å¯åŠ¨çš„æ—¶å€™ç»§ç»­ç”Ÿæ•ˆã€‚æˆ‘å¸Œæœ›æˆ‘æ‰€æœ‰çš„é…ç½®éƒ½ç”±æˆ‘è‡ªå·±ç¼–å†™ï¼Œæ‰€ä»¥é€‰æ‹©ç¦ç”¨äº†è¿™ä¸ªé€‰é¡¹
- ä¿®æ”¹äº† `PATH` å˜é‡ï¼šè¿™æ˜¯ä¸€ä¸ªé’ˆå¯¹ mac çš„é…ç½®ï¼Œåœ¨ mac ä¸Šé€šè¿‡ .app æ‰“å¼€ qutebrowser çš„æ—¶å€™ä¼šå¯åŠ¨ä¸€ä¸ªç±»ä¼¼æ²™ç®±çš„ç¯å¢ƒï¼Œå…¶ä¸­ä¸€äº›ç¯å¢ƒå˜é‡ä¸æˆ‘ä»¬çš„ç»ˆç«¯è®¾ç½®å¯èƒ½ä¸åŒï¼Œç”±äºåç»­æˆ‘ä»¬ä¼šå°è¯•ä» qutebrowser ä¸­è°ƒç”¨ä¸€äº›å¤–éƒ¨å·¥å…·ï¼Œå¦‚æœä¸æ­£ç¡®è®¾ç½® `PATH` ä¼šå¯¼è‡´è¿™äº›å·¥å…·æ‰¾ä¸åˆ°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ `:pyeval os.environ["PATH"]` æŸ¥çœ‹å½“å‰çš„ç¯å¢ƒå˜é‡
- å¯ç”¨äº†æ»šåŠ¨æ¡ï¼šé»˜è®¤æƒ…å†µä¸‹ qutebrowser ä¼šåƒ vim ä¸€æ ·åªä»¥ç™¾åˆ†æ¯”æ˜¾ç¤ºå½“å‰åœ¨æ–‡æ¡£ä¸­çš„ä½ç½®ï¼Œè¿™æ˜¾ç„¶æ²¡æœ‰æ»šåŠ¨æ¡ç›´è§‚ã€‚è¿™é‡Œæˆ‘ä»¬è°ƒç”¨äº† `c` å¯¹è±¡çš„ `scrolling` å­—æ®µè¿›è¡Œé…ç½®

### 3.2 æˆ‘æ¨èçš„é…ç½®


ä¸‹é¢è¿™äº›é…ç½®æ˜¯æˆ‘è®¤ä¸ºå¯ä»¥å¤§å¹…æé«˜ä½¿ç”¨ä½“éªŒçš„ï¼š

```python
# é»˜è®¤çš„å­—ä½“å¤§å°è¿˜æ˜¯æœ‰ç‚¹å°çš„
c.fonts.default_size = "16pt"

# é»˜è®¤æƒ…å†µä¸‹ qutebrowser æ˜¯ä½¿ç”¨è‹±è¯­çš„ï¼Œè¿™ä¼šå¯¼è‡´å¾ˆå¤šç½‘é¡µä¹Ÿä½¿ç”¨è‹±è¯­å‘ˆç°
c.content.headers.accept_language = "zh-CN;q=0.9,en-US,en;q=0.8"

# ä¿®æ”¹ headerï¼Œä¼ªè£…æˆ chromeã€‚qutebrowser çš„å†…æ ¸æœ¬å°±æ˜¯ chromiumï¼Œè¿™æ ·åšé—®é¢˜ä¸å¤§
c.content.headers.user_agent = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"

# ä¿®æ”¹ä¸€ä¸‹ hint çš„å¤–è§‚ä»¥åŠå¤‡é€‰çš„å­—æ¯
# é»˜è®¤æƒ…å†µä¸‹è¿™äº›å­—æ¯åªæœ‰ hjkl é‚£ä¸€è¡Œï¼Œè¿™é‡Œæˆ‘é€‰æ‹©å¢åŠ ä¸€è¡Œ
c.hints.padding = {"bottom": 1, "left": 5, "right": 3, "top": 1}
c.hints.chars = "asdfghjklzxcvbnm"
c.hints.border = "none"

# å¯ç”¨å¹³æ»‘æ»šåŠ¨ï¼ˆåªé’ˆå¯¹ hjkl ç”Ÿæ•ˆï¼‰
c.scrolling.bar = "always"
c.scrolling.smooth = True

# ä¿®æ”¹åº•éƒ¨çŠ¶æ€æ çš„å¤§å°å¹¶ç²¾ç®€å‘ˆç°çš„å†…å®¹
c.statusbar.padding = {"bottom": 2, "left": 0, "right": 5, "top": 2}
c.statusbar.widgets = ["search_match", "text:|", "url", "text:|", "scroll"]

# å¢åŠ ä¸Šé¢æ ‡ç­¾æ çš„å¤§å°
c.tabs.padding = {"bottom": 5, "left": 10, "right": 10, "top": 5}

# è®¾ç½®å¯åŠ¨é¡µé¢ã€é»˜è®¤é¡µé¢ã€æœç´¢å¼•æ“
c.url.default_page = "https://bing.com"
c.url.searchengines = {"DEFAULT": "https://bing.com/search?q={}"}
c.url.start_pages = "https://bing.com"
```

æˆ‘ä»¬å¯ä»¥é‡å¯ qutebrowser è®©é…ç½®ç”Ÿæ•ˆï¼Œä¹Ÿå¯ä»¥ç›´æ¥è¿è¡Œ `:config-source` å‘½ä»¤ï¼Œä½†éœ€è¦æ³¨æ„ï¼Œåè€…åªæ˜¯åœ¨å½“å‰çš„åŸºç¡€ä¸Šè¿è¡Œä½ çš„é…ç½®æ–‡ä»¶ï¼Œè€Œä¸ä¼šå°†å·²ç»ä¿®æ”¹çš„é…ç½®é‡ç½®ï¼Œæ‰€ä»¥å¦‚æœä½ åˆ é™¤äº†æŸäº›é…ç½®ç„¶åå†å»åˆ·æ–°ï¼Œä¼šå‘ç°åˆ é™¤çš„é…ç½®ä»ç„¶ç”Ÿæ•ˆã€‚

### 3.3 é…ç½®å¿«æ·é”®

å› ä¸ºå¿«æ·é”®æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©å°†å…¶æ”¾åœ¨äº†ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶å’Œ `config.py` åŒçº§ï¼š

```
ğŸ“‚ .qutebrowser
--  ğŸ“„ config.py
--  ğŸ“„ keymaps.py
--  ğŸ“„ quickmarks
--  ğŸ“‚ bookmarks
----  ğŸ“„ urls
--  ğŸ“‚ greasemonkey
```

é¦–å…ˆï¼Œæˆ‘ä»¬è¦åœ¨ `config.py` ä¸­å¼•å…¥ `keymaps.py`ï¼š

```python
config.source("keymaps.py")
```

ç„¶åæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹é…ç½®å¿«æ·é”®äº†ã€‚é¦–å…ˆæˆ‘é€‰æ‹©è§£ç»‘ä¸€äº›é»˜è®¤å¿«æ·é”®ï¼š

```python
unbind = [
    "<Alt-1>",
    "<Alt-2>",
    "<Alt-3>",
    "<Alt-4>",
    "<Alt-5>",
    "<Alt-6>",
    "<Alt-7>",
    "<Alt-8>",
    "<Alt-9>",
    "d",
    "H",
    "J",
    "K",
    "L",
]

for unbind_lhs in unbind:
    config.unbind(unbind_lhs)
```

å…¶ä¸­ï¼Œ<kbd>Alt</kbd> ç³»åˆ—ï¼ˆåœ¨ mac ä¸Šä¹Ÿå°±æ˜¯ <kbd>option</kbd>ï¼‰çš„å¿«æ·é”®æ˜¯ç”¨äºåˆ‡æ¢æ ‡ç­¾é¡µçš„ï¼Œä½†æ˜¯å› ä¸ºæˆ‘çš„ aerospace ä¹Ÿæ˜¯ç”¨è¿™äº›å¿«æ·é”®åˆ‡æ¢ workspaceï¼Œæ‰€ä»¥æˆ‘éœ€è¦æŠŠè¿™äº›è§£ç»‘æ‰ã€‚è‡³äºå…¶ä»–çš„ï¼š

- <kbd>d</kbd>ï¼šå…³é—­å½“å‰æ ‡ç­¾é¡µï¼›å¤ªå®¹æ˜“è¯¯è§¦äº†
- <kbd>J</kbd> / <kbd>K</kbd>ï¼šå‰å¾€å·¦ä¾§çš„ / å³ä¾§çš„æ ‡ç­¾é¡µï¼›å®¹æ˜“è¯¯è§¦ä¸”ä¸ç›´è§‚ï¼Œæ˜æ˜æ ‡ç­¾é¡µæ˜¯å·¦å³æ’å¸ƒçš„
- <kbd>H</kbd> / <kbd>L</kbd>ï¼šåœ¨å†å²è®°å½•ä¸­å‘å‰ / å‘åï¼›å®¹æ˜“è¯¯è§¦ä¸”ä¸ç›´è§‚ï¼Œå› ä¸ºæˆ‘ä¹ æƒ¯ç”¨ä¸Šä¸€æ¡å†å²å’Œä¸‹ä¸€æ¡å†å²è¿™æ ·æ¥è¿›è¡Œæè¿°

ç„¶åï¼Œæ˜¯ç»‘å®šæˆ‘ä»¬è‡ªå·±çš„å¿«æ·é”®ï¼š

```python
keymap = {
    "<Ctrl-1>": "tab-focus 1",
    "<Ctrl-2>": "tab-focus 2",
    "<Ctrl-3>": "tab-focus 3",
    "<Ctrl-4>": "tab-focus 4",
    "<Ctrl-5>": "tab-focus 5",
    "<Ctrl-6>": "tab-focus 6",
    "<Ctrl-7>": "tab-focus 7",
    "<Ctrl-8>": "tab-focus 8",
    "<Ctrl-9>": "tab-focus 9",
    "<Ctrl-0>": "tab-focus -1", # æœ€åä¸€ä¸ªæ ‡ç­¾é¡µ
    "<Ctrl-h>": "tab-prev",
    "<Ctrl-l>": "tab-next",
    "<Ctrl-j>": "forward",
    "<Ctrl-k>": "back",
    "<Ctrl-f>": "hint all hover", # æ¨¡æ‹Ÿé¼ æ ‡æ‚¬åœ
    "<Ctrl-y>": "hint links yank", # é€‰ä¸­æ¯”ingå¤åˆ¶é“¾æ¥
    "<Ctrl-q>": "tab-close",

    # é»˜è®¤æƒ…å†µä¸‹è¿™ä¸¤ä¸ªå¿«æ·é”®ç”¨ä¸åˆ°å¹³æ»‘æ»šåŠ¨ï¼Œä½†å¦‚æœæ”¹ä¸ºæ¨¡æ‹Ÿå¤šæ¬¡ j / k çš„è°ƒç”¨åˆ™å¯ä»¥
    "<Ctrl-d>": "cmd-run-with-count 15 scroll down",
    "<Ctrl-u>": "cmd-run-with-count 15 scroll up",
}

for lhs, rhs in keymap.items():
    config.bind(lhs, rhs)
```

### 3.4 ä¹¦ç­¾çš„ä½¿ç”¨

å‰é¢æˆ‘ä»¬åœ¨ä»‹ç»é…ç½®ç›®å½•ç»“æ„çš„æ—¶å€™çœ‹åˆ°äº† bookmark å’Œ quickmarkï¼Œè¿™äºŒè€…éƒ½æ˜¯ä¹¦ç­¾ï¼Œä½†åŒºåˆ«åœ¨äº quickmark å¯ä»¥è‡ªå®šä¹‰åç§°ï¼Œæ‰€ä»¥æˆ‘æ›´å¤šä½¿ç”¨å®ƒã€‚å…¶æ ¼å¼ä¸º `æ ‡é¢˜ ç½‘å€`ã€‚ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ä¸‹ <kbd>B</kbd> å¹¶é”®å…¥æ ‡é¢˜æˆ–é“¾æ¥æ‰“å¼€ä¹¦ç­¾ã€‚

ç„¶è€Œï¼Œquickmark ä¸æ”¯æŒæ–‡ä»¶å¤¹ï¼Œå¦‚æœæˆ‘ä»¬çš„ä¹¦ç­¾æ•°é‡å¢åŠ ï¼Œä¸Šé¢çš„é€‰å–æ–¹å¼ä¸æ˜¯å¾ˆæ¸…æ™°ã€‚æ‰€ä»¥é’ˆå¯¹è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è®¾ç½®æ ‡é¢˜çš„æ—¶å€™é‡‡ç”¨ä¸€äº›å°æŠ€å·§ï¼Œä¾‹å¦‚å¦‚æœæˆ‘ä»¬æœ‰å¦‚ä¸‹ä¹¦ç­¾ï¼š

```
The Modern JavaScript Tutorial https://javascript.info/
R for Data Science https://r4ds.had.co.nz/
Julia Tutorial https://ucidatascienceinitiative.github.io/IntroToJulia/
ArchWiki https://archlinux.org/
Starship https://starship.rs/zh-CN/
Stow https://www.gnu.org/software/stow/manual/stow.html
```

åŸæœ¬æˆ‘ä»¬æƒ³æŠŠå‰ä¸‰æ¡æ”¾åœ¨ learn æ–‡ä»¶å¤¹ä¸‹ï¼Œå°†åä¸‰æ¡æ”¾åœ¨ doc æ–‡ä»¶å¤¹ä¸‹ã€‚é‚£ä¹ˆæ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹æˆä¸‹é¢çš„æ ·å­ï¼š

```
learn - The Modern JavaScript Tutorial https://javascript.info/
learn - R for Data Science https://r4ds.had.co.nz/
learn - Julia Tutorial https://ucidatascienceinitiative.github.io/IntroToJulia/
doc - ArchWiki https://archlinux.org/
doc - Starship https://starship.rs/zh-CN/
doc - Stow https://www.gnu.org/software/stow/manual/stow.html
```

è¿™æ ·æˆ‘ä»¬åœ¨æŸ¥æ‰¾ä¹¦ç­¾çš„æ—¶å€™å°±å¯ä»¥å…ˆè¾“å…¥ `learn` æˆ– `doc` æ¥ç²¾ç®€å¤‡é€‰é¡¹ã€‚

å½“ç„¶ï¼Œè¿™è¿˜ä¸æ˜¯æœ€å¿«çš„ï¼Œå¦‚æœæˆ‘ä»¬çœŸçš„æœ‰ä¸€äº›éå¸¸é¢‘ç¹è®¿é—®çš„ç½‘ç«™ï¼Œå¯ä»¥ç›´æ¥è®¾ç½®å¿«æ·é”®æ‰“å¼€ï¼š

```python
really_quick_marks = {
    "gh": "https://github.com",
    "zh": "https://zhihu.com",
    "bl": "https://shaobin-jiang.github.io/blog",
    "ds": "https://chat.deepseek.com",
}

for suffix, url in really_quick_marks.items():
    config.bind(f"<Space>{suffix}", f"open -t {url}")
    config.bind(f",{suffix}", f"open {url}")
```

å¦‚ä¸Šï¼Œæˆ‘ä»¬è®¾ç½®ä»¥ <kbd>space</kbd> å¼€å¤´åŠ ä¸Šåç¼€åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€é“¾æ¥ï¼Œä»¥ <kbd>,</kbd> å¼€å¤´åŠ ä¸Šåç¼€åœ¨å½“å‰æ ‡ç­¾é¡µæ‰“å¼€é“¾æ¥ï¼Œè¿™æ ·å°±å¯ä»¥éå¸¸è¿…é€Ÿåœ°æ‰“å¼€å¸¸ç”¨ç½‘é¡µã€‚

## 4 ç‚¹å‡»ç©ºç™½å¤„ / ç‰¹å®šä½ç½®

åœ¨çœŸæ­£å¼€å§‹ä½¿ç”¨å‰ï¼Œä½ æˆ–è®¸ä¼šè§‰å¾— qutebrowser è¿™ç§è®¾è®¡éå¸¸ç¾å¦™ã€‚ä½†æ˜¯ï¼Œäº‹å®å¹¶éå¦‚æ­¤ã€‚æˆ‘ä»¬è®¾æƒ³ä¸€ç§æƒ…å†µï¼šæˆ‘ä»¬æ‰“å¼€äº†çŸ¥ä¹ï¼Œç‚¹å¼€äº†ç§ä¿¡ï¼Œç°åœ¨è¯¥æ€ä¹ˆæŠŠç§ä¿¡å…³æ‰å‘¢ï¼Ÿä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªè¦ç‚¹é¡µé¢ç©ºç™½å¤„å°±å¯ä»¥äº†ï¼Œä½†æ˜¯ç°åœ¨ç”¨é”®ç›˜æ“ä½œï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆå®ç°è¿™ä¸ªæ“ä½œå‘¢ï¼Ÿqutebrowser çš„ hint æ˜¯åŸºäºä¸€å®šçš„è§„åˆ™é€‰ä¸­å®ƒè®¤ä¸ºå¯ä»¥ç‚¹å‡»çš„å…ƒç´ ï¼Œè€Œ body ä¼¼ä¹å¹¶ä¸åœ¨è¿™ä¸ªèŒƒå›´ä¹‹ä¸­ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š

- ä½¿ç”¨ javascript æ¥è®©å½“å‰æœ‰ç„¦ç‚¹çš„å…ƒç´ å¤±å»ç„¦ç‚¹ï¼š`:jseval -q document.activeElement.blur()`ï¼ˆ`-q` æ˜¯ä¸æ‰“å°è¿”å›å€¼ï¼‰
- è¦æ±‚ qutebrowser ç‚¹å‡» body å…ƒç´ ï¼š`click-element css body`ï¼ˆä½¿ç”¨ css é€‰æ‹©å™¨é€‰ä¸­ bodyï¼‰

å½“æˆ‘ä»¬åœ¨ä½¿ç”¨å¿…åº”ã€github issue å°†ç„¦ç‚¹æ”¾åœ¨è¾“å…¥æ¡†çš„æ—¶å€™å¯ä»¥ä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼é‡æ–°è·å–ç„¦ç‚¹ï¼Œè€Œåœ¨çŸ¥ä¹è¿™ç§ä¸ç„¦ç‚¹æ— å…³çš„æ¡ˆä¾‹ä¸­ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼ã€‚ç„¶è€Œï¼Œç¬¬äºŒç§æ–¹å¼ä¹Ÿå¹¶ä¸ç¨³å¦¥ï¼Œå› ä¸ºå®ƒç»å¸¸ä¼šå¾ˆç¥å¥‡åœ°æ˜¾ç¤º body ä¸åœ¨é¡µé¢èŒƒå›´ä¸­è€Œæ— æ³•ç‚¹å‡»ã€‚

è¿™è¿˜æ²¡å®Œï¼Œæˆ‘ä»¬è®¾æƒ³å¦ä¸€ç§æƒ…å†µï¼Œæˆ‘ä»¬çš„é¡µé¢ä¸Šæœ‰ä¸€æ®µå¾ˆé•¿çš„ä»£ç å—ï¼Œä¸€è¡Œçš„å†…å®¹è¶…å‡ºäº†å±å¹•çš„å®½åº¦ï¼Œç°åœ¨æˆ‘ä»¬æƒ³è¦å·¦å³æ‹–åŠ¨ä»£ç å—ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œqutebrowser å¦‚ä½•çŸ¥é“æˆ‘ä»¬æ˜¯è¦è®©è¿™ä¸ªä»£ç å—å·¦å³ç§»åŠ¨è€Œä¸æ˜¯è®©æ•´ä¸ªé¡µé¢å·¦å³ç§»åŠ¨å‘¢ï¼Ÿæ­¤æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦å…ˆè®©ä»£ç å—è·å–ç„¦ç‚¹ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬æ²¡æœ‰åŠæ³•åƒåˆšæ‰é€‰ä¸­ body ä¸€æ ·é€‰ä¸­å…·ä½“çš„ä»£ç å—â€”â€”ä½ å½“ç„¶å¯ä»¥é’ˆå¯¹å…·ä½“çš„é¡µé¢åšå…·ä½“çš„è®¾ç½®ï¼Œä½†è¿™é‡Œæˆ‘ä»¬è®¨è®ºçš„æ˜¯ä¸€äº›æ›´åŠ  general çš„è§£å†³æ–¹æ¡ˆã€‚

äºæ˜¯æˆ‘é€‰æ‹©ç¼–å†™ä¸€ä¸ªè„šæœ¬ï¼Œå¯ä»¥å°†é¼ æ ‡å±…ä¸­æˆ–å°†é¼ æ ‡å‘ç‰¹å®šæ–¹å‘ç§»åŠ¨ 200 pxï¼Œç„¶ååœ¨ qutebrowser ä¸­è°ƒç”¨ã€‚åœ¨ mac ä¸Šï¼Œæˆ‘åœ¨ d è€å¸ˆçš„å¸®åŠ©ä¸‹ä½¿ç”¨äº† swift ç¼–å†™äº†è¿™æ®µè„šæœ¬ï¼š

```swift
import Foundation
import Cocoa
import CoreGraphics

func moveMouse(direction: String?, position: String?) {
    let screenFrame = NSScreen.main?.frame ?? NSRect(x: 0, y: 0, width: 1920, height: 1080)
    let centerPoint = NSPoint(x: screenFrame.midX, y: screenFrame.midY)
    var currentMouseLocation = NSEvent.mouseLocation
    currentMouseLocation.y = screenFrame.height - currentMouseLocation.y // convert to Cocoa coordinates
    
    var newPoint: NSPoint
    
    if let pos = position {
        let components = pos.components(separatedBy: ",")
        if components.count == 2,
           let x = Int(components[0]),
           let y = Int(components[1]) {
            newPoint = NSPoint(x: CGFloat(x), y: CGFloat(y))
        } else {
            print("Invalid position format. Use x,y")
            return
        }
    } else if let dir = direction?.lowercased() {
        let distance: CGFloat = 200
        switch dir {
            case "up":
                newPoint = NSPoint(x: currentMouseLocation.x, y: currentMouseLocation.y - distance)
            case "down":
                newPoint = NSPoint(x: currentMouseLocation.x, y: currentMouseLocation.y + distance)
            case "left":
                newPoint = NSPoint(x: currentMouseLocation.x - distance, y: currentMouseLocation.y)
            case "right":
                newPoint = NSPoint(x: currentMouseLocation.x + distance, y: currentMouseLocation.y)
            case "center":
                newPoint = centerPoint
            default:
                print("Invalid direction. Use up/down/left/right/center")
                return
        }
    } else {
        print("No direction or position specified")
        return
    }
    
    newPoint.x = max(0, min(screenFrame.width, newPoint.x))
    newPoint.y = max(0, min(screenFrame.height, newPoint.y))
    
    let event = CGEvent(mouseEventSource: nil, mouseType: .mouseMoved, mouseCursorPosition: newPoint, mouseButton: .left)
    event?.post(tap: .cghidEventTap)
}

func clickMouse() {
    guard let currentMouseLocation = CGEvent(source: nil)?.location else {
        print("Cannot get cursor position")
        return
    }
    
    let mouseDownEvent = CGEvent(mouseEventSource: nil, mouseType: .leftMouseDown, mouseCursorPosition: currentMouseLocation, mouseButton: .left)
    let mouseUpEvent = CGEvent(mouseEventSource: nil, mouseType: .leftMouseUp, mouseCursorPosition: currentMouseLocation, mouseButton: .left)
    
    mouseDownEvent?.post(tap: .cghidEventTap)
    mouseUpEvent?.post(tap: .cghidEventTap)
}

let help = """
Usage:
swift cursor.swift [up|down|left|right|center]
swift cursor.swift position x,y
swift cursor.swift click
"""

if CommandLine.arguments.count > 1 {
    let argument = CommandLine.arguments[1].lowercased()
    
    if ["up", "down", "left", "right", "center"].contains(argument) {
        moveMouse(direction: argument, position: nil)
    } else if argument == "position" && CommandLine.arguments.count > 2 {
        moveMouse(direction: nil, position: CommandLine.arguments[2])
    } else if argument == "click" {
        clickMouse()
    } else {
        print(help)
    }
} else {
    print(help)
}
```

æˆ‘å°†å…¶å‘½åä¸º `cursor.swift`ï¼Œå¹¶åœ¨ qutebrowser ä¸­æ·»åŠ äº†ä¸‹è¿°å¿«æ·é”®ï¼š

```python
import os
CURSOR_PATH = os.path.join(os.environ["HOME"], ".qutebrowser", "cursor.swift")

{
    "\\c": f"spawn swift {CURSOR_PATH} center",
    "\\h": f"spawn swift {CURSOR_PATH} left",
    "\\j": f"spawn swift {CURSOR_PATH} down",
    "\\k": f"spawn swift {CURSOR_PATH} up",
    "\\l": f"spawn swift {CURSOR_PATH} right",
    "\\\\": f"spawn swift {CURSOR_PATH} click",
}
```

è¿™æ ·æˆ‘å°±å¯ä»¥å°†é¼ æ ‡è°ƒæ•´åˆ°ä¸€ä¸ªå¤§è‡´çš„ä½ç½®å¹¶è¿›è¡Œç‚¹å‡»ã€‚è¿™è™½ç„¶ä¸æ˜¯å®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼Œä½†æ˜¯ä¹Ÿä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†æˆ‘çš„é—®é¢˜ã€‚

## 5 è§‚çœ‹è§†é¢‘

qutebrowser æ˜¯ç”¨ qt å†™çš„ï¼Œä½¿ç”¨äº† qtwebengineã€‚ä½†æ˜¯ï¼Œç›¸ä¿¡å¤§å®¶åº”è¯¥çŸ¥é“ qt é‚£éå¸¸æ¶å¿ƒçš„è®¸å¯è¯é—®é¢˜ï¼Œåæ­£è¿™è¿™é‚£é‚£çš„å„ç§é—®é¢˜ï¼Œæœ€ç»ˆå¯¼è‡´ qutebrowser åœ¨ mac ä¸Šçš„ qtwebengine ä¸æ”¯æŒ mp4 ç­‰è§†é¢‘çš„æ’­æ”¾ã€‚ä½ å½“ç„¶å¯ä»¥é€‰æ‹©ä»å¤´ç¼–è¯‘ä¸€ä»½å¸¦æœ‰ proprietary codecs çš„ qtwebengineï¼Œä½†æ˜¯è¿™ä¸ªç¼–è¯‘æµç¨‹å¾ˆæ¶å¿ƒå¾ˆéº»çƒ¦å¾ˆè´¹æ—¶ï¼ˆæˆ‘è¿˜æ²¡ç¼–è¯‘æˆåŠŸï¼‰ã€‚æ‰€ä»¥ï¼Œqutebrowser å®˜æ–¹æ¨èçš„åšæ³•æ˜¯ç”¨ mpv æ’­æ”¾ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬è¦èƒ½å¤Ÿé€‰ä¸­è§†é¢‘ã€‚æˆ‘ä»¬åœ¨ hint ä¸­æ·»åŠ ä¸€ç±» videoï¼Œå¹¶è¦æ±‚å…¶é€‰ä¸­æ‰€æœ‰çš„ video å…ƒç´ ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ `hint video <something-to-do>` è¿™æ ·æ¥æ“ä½œè§†é¢‘å…ƒç´ äº†ï¼š

```python
c.hints.selectors["video"] = ["video"]
```

åœ¨å¯¹ hint çš„æ“ä½œä¸­ï¼Œæœ‰ä¸€ç§æ˜¯ä½¿ç”¨ `spawn` å‘½ä»¤ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™æ ·é€‰ä¸­è§†é¢‘å…ƒç´ å¹¶åœ¨ mpv ä¸­æ’­æ”¾ï¼š `hint video spawn mpv {hint-url} --keep-open=yes --geometry=80%+200+200`ã€‚è¿™é‡Œé¢ï¼Œ`spawn` åé¢çš„éƒ½æ˜¯æˆ‘ä»¬ä¸€èˆ¬åœ¨å‘½ä»¤è¡Œæ‰§è¡Œçš„å†…å®¹ï¼Œ`--keep-open` æ˜¯ mpv çš„å‚æ•°ï¼Œè¦æ±‚å…¶åœ¨è§†é¢‘æ’­æ”¾å®Œæˆåä¸è¦ç«‹åˆ»å…³é—­ï¼›`--geometry` åˆ™æ˜¯æ§åˆ¶ mpv å®½åº¦ä¸ºå±å¹•çš„ 80%ï¼Œå·¦ä¾§å’Œé¡¶éƒ¨è·ç¦»å±å¹•å·¦ä¾§å’Œé¡¶éƒ¨å„ 200 pxã€‚

## 6 è¡¥å…¨ hint

qutebrowser é»˜è®¤æƒ…å†µä¸‹åŸºäº css é€‰æ‹©å™¨é€‰ä¸­å¯ä»¥ hint çš„å…ƒç´ ï¼Œè¿™æ ·åšè‚¯å®šæ˜¯ä¸å…¨çš„ï¼Œæ¯”å¦‚ç”¨ `addEventListener` æ·»åŠ ç‚¹å‡»äº‹ä»¶çš„å…ƒç´ å°±ä¸ä¼šè¢«é€‰ä¸­ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†…ç½®çš„æ²¹çŒ´è„šæœ¬åŠŸèƒ½ï¼Œåœ¨é¡µé¢åŠ è½½ä¹‹å‰æ‰§è¡Œä¸€äº› javascript ä»£ç ã€‚æˆ‘ä»¬åœ¨ `greasemonkey/` ä¸­åˆ›å»º `hint.js`ï¼š

```javascript
(function () {
    'use strict';

    const class_name = 'qutebrowser-custom-hint';
    const old_add_event_listener = Element.prototype.addEventListener;
    Element.prototype.addEventListener = function () {
        if (arguments[0] === 'click') {
            this.classList.add(class_name);
        }

        return old_add_event_listener.apply(this, arguments);
    };
})();
```

ä½†æ˜¯è¿™ç§åšæ³•ä»ç„¶ä¸å¤Ÿå…¨é¢ï¼Œæœ‰ä¸€äº›å¥‡æ€ªçš„ç½‘é¡µåœ¨è¿™ç§æƒ…å†µä¸‹ä»ç„¶ä¼šæ¼è¿‡ä¸€äº›å¯ç‚¹å‡»çš„å…ƒç´ ï¼ˆæ¯”å¦‚ deepseekï¼Œæˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆé‚£ä¸ªâ€œå¼€å¯æ–°å¯¹è¯â€çš„æŒ‰é’®å°±æ˜¯æ— æ³•é€‰ä¸­ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¯ä»¥ç»§ç»­é’ˆå¯¹ç‰¹å®šç½‘é¡µåˆ¶å®šä¸€äº›ç‰¹å®šçš„è§„åˆ™ï¼š

```javascript
(function () {
    'use strict';

    const host = window.location.host;
    const class_name = 'qutebrowser-custom-hint';

    window.addEventListener('load', function () {
        if (host === 'chat.deepseek.com') {
            let target_text = 'å¼€å¯æ–°å¯¹è¯';
            let walker = document.createTreeWalker(document.body, NodeFilter.SHOW_TEXT, null);

            // æˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆç›´æ¥åœ¨ createTreeWalker ä¸­ç¼–å†™ filter ä¸å¥½ç”¨ï¼Œå¥½åƒæ˜¯ greasemonkey ç‰¹æ®Šçš„æ²™ç®±æœºåˆ¶é€ æˆçš„
            let node;
            while ((node = walker.nextNode())) {
                if (node.nodeType === Node.TEXT_NODE && node.nodeValue === target_text) {
                    node.parentNode.classList.add(class_name);
                    break;
                }
            }
        }
    });
})();
```

## 7 æ€»ç»“

å…¶å®å³ä¾¿ç»è¿‡äº†è¿™ä¹ˆå¤šçš„é…ç½®ï¼Œqutebrowser è¿˜æ˜¯ä¼šæœ‰ç€ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ bilibili è§†é¢‘çš„æ’­æ”¾ï¼Œæ¯”å¦‚æ–‡æœ¬çš„é€‰ä¸­ï¼ˆç¡®å®æ˜¯æœ‰ä¸€ä¸ª caret mode ä½†æ˜¯ä½“éªŒå¾ˆçƒ‚ï¼‰ï¼Œæ¯•ç«Ÿç”¨æˆ·äº¤äº’è¿‡äºå¤æ‚ï¼Œä»…é é”®ç›˜æè¿°ç¡®å®å­˜åœ¨å›°éš¾ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ çš„éœ€æ±‚ä»…ä»…æ˜¯æµè§ˆç½‘é¡µï¼Œæ¯”å¦‚æŸ¥çœ‹æ–‡æ¡£ã€åˆ·åˆ· githubï¼Œé‚£ qutebrowser è¿˜æ˜¯ç»°ç»°æœ‰ä½™çš„ã€‚è‡³äºæ›´å¤æ‚çš„æ“ä½œï¼Œæ¯”å¦‚åˆ· b ç«™ã€å‰ç«¯è°ƒè¯•ï¼Œæˆ‘é€‰æ‹©å°†å…¶äº¤ç»™ä¼ ç»Ÿçš„æµè§ˆå™¨ã€‚
